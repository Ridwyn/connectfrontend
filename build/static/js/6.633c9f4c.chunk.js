(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[6],{82:function(e,t,a){"use strict";a.r(t);var c=a(2),s=a.n(c),n=a(27),r=a(13),o=a(3),l=a(6),i=a(1),u=a(7),j=a(8),d=a(28),b=a(16),m=a(84),p=a(85),O=a(0),f=function(e){var t=e.project,a=Object(i.useState)(""),c=Object(l.a)(a,2),f=c[0],x=c[1],h=Object(i.useState)({}),v=Object(l.a)(h,2),_=v[0],N=v[1],k=Object(i.useState)({}),g=Object(l.a)(k,2),P=(g[0],g[1]),w=Object(u.f)(),y=Object(i.useState)(Object(r.a)(Object(r.a)({},t),{},{status_template:{name:""}})),S=Object(l.a)(y,2),C=S[0],D=S[1],T=Object(i.useContext)(d.a),F=(T.projects,T.dispatchProject,T.projectStore,T.setProjectStore),I=Object(i.useState)([]),E=Object(l.a)(I,2),M=E[0],L=E[1];Object(i.useEffect)((function(){for(var e=[].concat(Object(n.a)(C.workspace.custom_statuses),[C.workspace.default_statuses]),t={},a=0;a<e.length;a++)t[e[a]._id]=e[a];D(Object(r.a)(Object(r.a)({},C),{},{status_template:t[C.active_status_template]})),L(t[C.active_status_template].statuses.map((function(e){return e.color})))}),[D,L]);var q=function(e){return console.log(e),function(e){var t=!1;return e.hasOwnProperty("Delete Project")&&"del"===e["Delete Project"]?N({}):e.hasOwnProperty("Delete Project")&&"del"!==e["Delete Project"]&&(N({"Delete Project":"Invalid! Enter Lowercase del"}),t=!0),t}(e)},A=function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(_).length){e.next=4;break}return e.next=3,Object(b.a)({_id:C._id});case 3:w.push(Object(j.a)().ProjectMenu.urlPathText({space_id:C.workspace._id}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)(O.Fragment,{children:C?Object(O.jsxs)("div",{className:"",children:[Object(O.jsx)("button",{onClick:function(){w.push(Object(j.a)().TaskMenu.urlPathText({space_id:C.workspace._id,project_id:C._id})),F(C)},className:"button m-1",children:C.name}),Object(O.jsx)("button",{onClick:function(){w.push(Object(j.a)().TaskForm.urlPathText({space_id:C.workspace._id,project_id:C._id}))},className:"button m-1",children:"+ task"}),Object(O.jsxs)("span",{className:"border rounded p-2",children:[C.status_template.name,M?M.map((function(e,t){return Object(O.jsx)("span",{className:"border rounded p-2",style:{backgroundColor:e}},t)})):""]}),Object(O.jsxs)("span",{className:"",children:[Object(O.jsx)(p.a,{className:"m-2 btn btn-outline-danger p-1",modalFormId:"task",text:"Delete",onClick:function(){P({name:""}),x("Delete this Project")}}),Object(O.jsx)(m.a,{modalFormId:"task",onSubmit:function(e){A(e)},modalTitle:f,inputData:{"Delete Project":""},placeholders:{"Delete Project":"type del"},errors:_,isError:function(e){return q(e)}})]})]}):null})},x=function(e){var t=e.projects;return Object(O.jsx)(O.Fragment,{children:t.map((function(e){return Object(O.jsx)(f,{project:e},e._id)}))})},h=a(26);t.default=function(){var e=Object(u.h)(),t=Object(i.useContext)(d.a),a=t.projects,c=t.dispatchProject,f=Object(i.useContext)(h.a),v=Object(l.a)(f,1)[0],_=Object(i.useState)({name:""}),N=Object(l.a)(_,2),k=N[0],g=N[1],P=Object(i.useState)([]),w=Object(l.a)(P,2),y=w[0],S=w[1],C=Object(i.useState)({}),D=Object(l.a)(C,2),T=D[0],F=D[1],I=Object(i.useState)(""),E=Object(l.a)(I,2),M=E[0],L=E[1],q=Object(u.f)(),A=Object(u.h)(),J=A.space_id,z=A.project_id;A.task_id;Object(i.useEffect)(Object(o.a)(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:d.c.GET,payload:e}),t.next=3,v.find((function(t){return t._id.toString()===e.space_id.toString()}));case 3:a=t.sent,g(Object(r.a)({},a)),a&&([].concat(Object(n.a)(a.custom_statuses),[a.default_statuses]),S([].concat(Object(n.a)(a.custom_statuses),[a.default_statuses])));case 6:case"end":return t.stop()}}),t)}))),[e,g,S,v]);var G=function(){var t=Object(o.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.space_id=e.space_id,!a.active_status_template||!Array.isArray(a.active_status_template)){t.next=8;break}return a.active_status_template=a.active_status_template[1]._id,t.next=5,Object(b.c)(a);case 5:q.push(Object(j.a)().ProjectMenu.urlPathText({space_id:J,project_id:z})),t.next=11;break;case 8:return t.next=10,Object(b.c)(a);case 10:q.push(Object(j.a)().ProjectMenu.urlPathText({space_id:J,project_id:z}));case 11:console.log(a);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"border-top border-bottom p-2  d-flex flex-column flex-wrap  align-items-start ",children:[Object(O.jsxs)("div",{className:"my-2 d-flex flex-row align-items-center",children:[Object(O.jsxs)("h6",{className:"",children:["Projects on ",k.name," "]}),Object(O.jsx)(p.a,{className:"m-2",modalFormId:"projectmenu",text:"+ New",onClick:function(){F({name:"",active_status_template:y||[]}),L("New Project")}})]}),Object(O.jsx)(m.a,{modalFormId:"projectmenu",onSubmit:function(e){G(e)},modalTitle:M,inputData:T}),a?Object(O.jsx)(x,{projects:a}):null]})})}},84:function(e,t,a){"use strict";var c=a(13),s=a(6),n=a(1),r=(a(86),a(0));t.a=function(e){var t=e.modalTitle,a=e.onSubmit,o=e.inputData,l=e.modalFormId,i=e.placeholders,u=void 0===i?{}:i,j=e.errors,d=void 0===j?{}:j,b=e.isError,m=void 0!==b&&b,p=Object(n.useState)(o),O=Object(s.a)(p,2),f=O[0],x=O[1],h=function(e){var t=e.target.id,a={};"active_status_template"!==t&&(a[t]=e.target.value,x(Object(c.a)(Object(c.a)({},f),a))),"active_status_template"==t&&(a[t]=e.target.selectedOptions[0].value,x(Object(c.a)(Object(c.a)({},f),a)))};Object(n.useEffect)((function(){x(o)}),[o]);var v=function(){window.$("#".concat(l)).modal("hide")};return Object(r.jsx)("div",{children:Object(r.jsx)("div",{className:"modal fade ",id:l,tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(r.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(r.jsxs)("div",{className:"modal-content",children:[Object(r.jsxs)("div",{className:"modal-header",children:[Object(r.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:t}),Object(r.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(r.jsx)("div",{className:"modal-body",children:Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),"function"===typeof m&&m(f)||(a(f),v())},className:"needs-validation",children:[Object.entries(o).map((function(e,t){var a=Object(s.a)(e,2),c=a[0],n=a[1],o=null;return o="active_status_template"==c?Object(r.jsxs)("select",{className:"form-select",id:c,name:"active_status_template",onChange:h,required:!0,children:[Object(r.jsx)("option",{value:"",className:"fw-light",children:"please select"}),n.map((function(e,t){var a=e._id,c=e.name;return 0==t?Object(r.jsxs)("option",{value:a,children:[" ",c+t]}):Object(r.jsx)("option",{value:a,children:c+t})}))]}):Object(r.jsx)("input",{type:"text",className:"form-control ",id:c,placeholder:u[c]?u[c]:"",value:f[c],onChange:h,required:!0}),Object(r.jsxs)("div",{className:"mb-3",children:[Object(r.jsx)("label",{htmlFor:"text",className:"col-form-label",style:{textTransform:"capitalize"},children:c}),o,Object(r.jsx)("div",{className:"text-danger form-text",children:d[c]?d[c]:""}),Object(r.jsx)("div",{className:"invalid-feedback",children:"Please choose a username."})]},t)})),Object(r.jsx)("div",{className:"mb-2 d-flex justify-content-end",children:Object(r.jsx)("button",{type:"submit",className:" ml-auto",children:"Save"})})]})})]})})})})}},85:function(e,t,a){"use strict";var c=a(0);t.a=function(e){var t=e.text,a=e.onClick,s=e.color,n=e.modalFormId,r=e.className;return Object(c.jsx)("button",{dangerouslySetInnerHTML:{__html:t},onClick:a,type:"button",className:"p-1 "+r,"data-bs-toggle":"modal","data-bs-target":"#"+n,style:{color:s}})}}}]);
//# sourceMappingURL=6.633c9f4c.chunk.js.map